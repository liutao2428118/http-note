# 安全 HTTP

## HTTPS

HTTPS 是目前最流行的 HTTP 安全形式。最初是由网景公司首创

![Image text](/images/1648281650(1).png)

## 数字加密

1. 密码，对文本进行编码，使偷窥者无法识别的算法。
2. 密钥，改变密码行为的数字化参数。
3. 对称密钥加密，编/解码使用相同密钥的算法。
4. 不对称密钥加密，编/解码使用不相同密钥的算法。
5. 公开密钥加密，一种能够使数百万计算机便捷的发送机密报文的系统。
6. 数字证书，由一个可信的组织验证和签发的识别信息。

## 密码

密码是一套编码方案-一特殊的报文编码方式，加密之前的原始报文通常称为明文。使用了密码之后的编码报文通常被称作密文。

![Image text](/images/1648282188(1).png)

## 使用了密钥的密码

编码算法和编码机都可能会落入敌人的手中，所以大部分机器上的一些号盘，可以将其设置被大量不同的值以改变密码的工作方式。即使机器被盗，也有正确的号盘设置（密钥值），解码器也无法工作。

## 对称密钥加密技术

具体了解密钥和密码是怎么配合工作的。很多数字加密算法都被称为对称密钥加密技术。这是因为它们在编码时使用的密钥值和解码时一样。我们称为密钥 K。

![Image text](/images/1648282612(1).png)

对称密码加密有个缺点之一就是发送者和接受者在互相对话之前，一定要有一个共享的保存密钥。

## 公开密钥加密技术

公开密钥加密技术没有为每对主机使用单独的加密/解密密钥，而是使用了两个非对称密钥：公钥和私钥。公钥是公开的了大家都可以拿到，私用只有主机自己才知道，公钥加密-私钥解密。

![Image text](/images/1648282971(1).png)

## 数字签名

除了加/解密报文外，我们还可以用加密系统对报文进行签名，以说明是谁编写的报文，同时证明报文未被篡改过。我们称这种技术为数字签名。

签名是加了密的校验和，数字签名是用私钥来签名，私钥只有主机自己知道，以此来证明这个报文是作者的，通过公钥来验证报文的正确性。

![Image text](/images/1648283461(1).png)

## 数字证书

数字证书中包含了由某个受信任组织担保的用户或者公司的相关信息。

也就是个身份证明，需要一个权机构对某个网站来颁发证书来证明你是可信的！

### 证书的主要内容

1. 对象的名称（人、服务器、组织等）
2. 过期时间
3. 证书发布者（由谁为证书担保）
4. 来自证书发布者的数字签名
5. 对象的公开密钥，以及对象和所用签名算法的描述性信息。

![Image text](/images/1648284110(1).png)

## HTTPS-细节介绍

### 建立安全传输

由于 SSL 安全层的存在，客户端首先打开一条到 Web 服务器端口 443 的连接。一旦建立了 TCP 连接，客户端和服务器的会初始化 SSL 层，对加密参数进去沟通，并交换密钥。握手完成之后，SSL 初始化就完成了，这时候客户端就可以应用层就可以把报文发送给安全层加密，在将加密后的报文给到 TCP 层发送出去。

### SSL握手

在发送加密的 HTTP 报文之前，客户端要和服务器进行一次 SSL 握手，握手过程需要完成一下工作：

1. 交换协议版本号
2. 选择一个两端都了解的密码
3. 对两端的身份进行认证
4. 生成临时的会话密钥，以便加密信道

![Image text](/images/1648284874(1).png)

## HTTPS 客户端实例

### OpenSSL

OpenSSL 是 SSL 和 TSL 最常见的开源实现。

### 简单的 HTTPS 客户端

我们可以使用 OpenSSL 包来编写一个非常简单的 HTTPS 客户端。这个客户端与服务器建立一条 SSL 连接。