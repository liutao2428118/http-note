# 集成点：网关、隧道、中续

## 网关

网关是两个网络（子网）之间的连接设备，有些网关也兼备了转换器的角色，把一种协议翻译成另一种协议

## 协议网关

协议网关顾名思义就是转换协议的的网关，客户端要请求个 ftp 服务器上的文件，客户端请求是通过 http 协议，通过网关转换成 ftp 协议到达服务器请求。

#### 服务器端 web 网关

请求流入原始服务器时，服务器端 Web 网关会将客户端 HTTP 请求转换为其他协议

## 资源网关

应用程序服务器是服务器端网关，与客户端通过 HTTP 进行通信，并与服务器的应用程序相连。

![Image text](/images/1648121892(1).png)

## 隧道

Web 隧道允许用户通过 HTTP 连接发送非 HTTP 流量，这样就可以在 HTTP 上捎带其他协议数据了。 使用 Web 隧道最常见的原因就是要在 HTTP 连接中嵌入非 HTTP 流量，这样，这类流量就可以穿过只允许 Web 流量通过的防火墙了。

#### 用 CONNECT 建立 HTTP 隧道

CONNECT 方法请求隧道网关创建一条到达任意目的服务器和端口的 TCP 连接，并对后继数据进行盲转发。

CONNECT 请求：

```js
CONNECT home.netscape.com:443 HTTP/1.0
User-agent: Mozilla/4.0
```

CONNECT 响应:

```js
HTTP/1.0 200 Connection Established
Proxy-agent: Netscape-Proxy/1.1
```

#### SSL 隧道

最初开发 Web 隧道是为了通过防火墙传输加密的 SSL 流量。很多组织都会将所有流量通过分组过滤路由器和代理服务器以隧道方式传输，以提升安全性。但有些协议，比如加密 SSL，其信息是加密的，无法通过传统的代理服务器转发。隧道会通过一条 HTTP 连接来传输 SSL 流量，以穿过端口 80 的HTTP 防火墙

![Image text](/images/1648122643(1).png)

## 中继

HTTP 中继是没有完全遵循 HTTP 规范的简单 HTTP 代理。中继负责处理 HTTP 中建立连接的部分，然后对字节进行盲转发。